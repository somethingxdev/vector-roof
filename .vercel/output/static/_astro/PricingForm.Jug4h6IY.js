import{j as e}from"./jsx-runtime.XGodtQ4D.js";import{r as a}from"./index.Nkt9jjly.js";import{u as y,I as A,_ as u}from"./index.YV3eq1v5.js";const F=()=>{const[l,d]=a.useState(null),i=a.useRef(null),[o,x]=a.useState(null),[p,f]=a.useState(""),{register:r,handleSubmit:g,reset:N,formState:{isSubmitting:h,errors:c}}=y();async function b(s,n){try{let t;n.preventDefault(),o&&(t=o.split(",")[1]),(await fetch("/api/sendEmailFooter",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s.name,email:s.email,message:s.message,content:t,filename:p})})).ok?u.success("Письмо успешно отправлено!",{duration:3e3,position:"bottom-center"}):u.error("Упс, что-то пошло не так Попробуйте ещё раз",{duration:3e3,position:"bottom-center"})}catch(t){console.log(t)}}const C=s=>{const n=new FileReader,t=s.target.files;n.onload=w=>{x(w.target.result.toString()),f(t[0].name)},n.readAsDataURL(t[0]);const m=s.target.files[0];d(m)},j=()=>{i.current.click()};return e.jsxs("form",{className:" max-w-[750px]",onSubmit:g(b),children:[e.jsx("div",{className:"flex flex-col md:flex-row items-end gap-5",children:e.jsxs("fieldset",{className:"w-full mb-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("input",{type:"text",required:!0,...r("name",{required:!0,maxLength:30}),placeholder:"Имя",className:`input h-[52px] focus:ring-1 focus:ring-[#7AD9A0] lg:h-[44px] rounded border-none w-full ${c.name&&"ring-1 ring-primary"}`}),e.jsx("input",{type:"email",required:!0,...r("email",{required:!0,pattern:{value:/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/,message:"Invalid email address"}}),placeholder:"Email",className:`input h-[52px] lg:h-[44px] focus:ring-[#7AD9A0] rounded border-none w-full 
              ${c.email&&"ring-1 ring-primary"}`})]}),e.jsx("textarea",{placeholder:"Краткое описание задачи",...r("message",{maxLength:300}),className:"input resize-none h-[80px] focus:ring-1 focus:ring-[#7AD9A0] rounded border-none w-full "})]})}),e.jsxs("div",{className:"flex-stack flex-col xs:flex-row gap-2 items-start mb-2",children:[e.jsxs("label",{htmlFor:"file",onClick:j,className:"flex relative items-center cursor-pointer  hover:text-primary transition-colors gap-2 text-sm text-[#585A5F]",children:[e.jsx("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M10.5132 18.7633L11.4854 19.7354L19.7354 11.4854C21.8982 9.32257 21.8982 5.8012 19.7354 3.63832C17.5711 1.47407 14.0525 1.47407 11.8882 3.63832L2.95074 12.5758C1.166 14.3606 1.166 17.2632 2.95074 19.0479C3.84174 19.9389 5.01462 20.3872 6.18749 20.3872C7.36037 20.3872 8.53187 19.9403 9.42424 19.0479L17.6742 10.7979C18.3549 10.1173 18.7289 9.21257 18.7289 8.25007C18.7289 7.28757 18.3549 6.38282 17.6729 5.70082C16.3116 4.33957 13.937 4.33957 12.5757 5.70082L5.01324 13.2633L5.98537 14.2354L13.5479 6.67295C14.388 5.83282 15.8606 5.83282 16.7007 6.67295C17.1215 7.0937 17.3539 7.65332 17.3539 8.25007C17.3539 8.84682 17.1215 9.40645 16.7007 9.82582L8.45074 18.0758C7.20224 19.3243 5.17137 19.3243 3.92287 18.0758C2.67437 16.8273 2.67437 14.7964 3.92287 13.5479L12.8604 4.61045C14.4884 2.98245 17.1352 2.98245 18.7632 4.61045C20.3912 6.23845 20.3912 8.88532 18.7632 10.5133L10.5132 18.7633Z",fill:"currentColor"})}),e.jsx("span",{children:l?l.name:"Прикрепить файл"}),e.jsx("input",{id:"file",ref:i,className:"opacity-0 absolute h-0 w-0",type:"file",...r("file"),onChange:C,accept:"image/*"})]}),e.jsx("button",{type:"submit",className:"button hover:bg-[#2E3037] disabled:bg-gray-500 w-full xs:w-auto px-2 sm:px-7 text-sm sm:text-base",disabled:h,children:"Оставить заявку"})]}),e.jsxs("label",{className:"flex items-center text-[#585A5F] lg:text-white gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",required:!0,className:"form-checkbox  rounded-sm border border-[#D5D5D5] text-primary"}),e.jsx("span",{className:"text-[12px] text-[#585A5F]",children:"Я согласен с политикой конфиденциальности сайта"})]}),e.jsx(A,{})]})};export{F as default};
